<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Places API Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }
        .endpoint { background: #f4f4f4; padding: 20px; margin: 20px 0; border-radius: 5px; }
        .method { display: inline-block; padding: 5px 10px; border-radius: 3px; color: white; font-weight: bold; }
        .get { background: #61affe; }
        .post { background: #49cc90; }
        .put { background: #fca130; }
        .delete { background: #f93e3e; }
        pre { 
            background: #2d2d2d; 
            color: #f8f8f2; 
            padding: 15px; 
            border-radius: 5px; 
            overflow-x: auto;
            border: 1px solid #444;
            font-family: 'Courier New', monospace;
        }
        .response { margin-top: 15px; }
    </style>
</head>
<body>
    <h1>ðŸ“š Places API Documentation</h1>
    <p>API for managing interesting places in cities</p>

    <div class="endpoint">
        <h2><span class="method get">GET</span> /api/places</h2>
        <p><strong>Get all places with optional filtering and sorting</strong></p>
        
        <h3>Query Parameters:</h3>
        <ul>
            <li><code>category</code> - Filter by category (e.g., <code>cafe</code>, <code>museum</code>)</li>
            <li><code>city</code> - Filter by city (e.g., <code>Paris</code>, <code>New York</code>)</li>
            <li><code>rating</code> - Returns places with rating <strong>equal to or higher than</strong> this value (e.g., <code>4.0</code>)</li>
            <li><code>sort</code> - Sort field (e.g., <code>name</code>, <code>rating</code>, <code>created_at</code>)</li>
            <li><code>order</code> - Sort order (<code>ASC</code> or <code>DESC</code>)</li>
        </ul>

        <h3>Request Examples:</h3>
        <pre><code>GET /api/places?category=cafe&amp;city=Paris&amp;sort=rating&amp;order=DESC
GET /api/places?rating=4.5
GET /api/places?sort=name&amp;order=ASC</code></pre>

        <div class="response">
            <h3>Response Example (200 OK):</h3>
            <pre><code>{
    "status": "success",
    "data": [
        {
            "id": 101,
            "name": "Downtown Coffee Shop",
            "description": "Popular cafe with artisanal coffee",
            "category": "cafe",
            "address": "123 Main Street",
            "city": "Paris",
            "rating": 4.5,
            "created_at": "2024-01-15 10:30:00",
            "updated_at": "2024-01-15 10:30:00"
        },
        {
            "id": 102,
            "name": "City Art Gallery",
            "description": "Contemporary art exhibitions",
            "category": "museum",
            "address": "456 Gallery Road",
            "city": "Paris",
            "rating": 4.3,
            "created_at": "2024-01-14 14:20:00",
            "updated_at": "2024-01-14 14:20:00"
        }
    ],
    "count": 2,
    "filters": {
        "category": "cafe",
        "city": "Paris"
    },
    "sort": "rating",
    "order": "DESC"
}</code></pre>
        </div>
    </div>

    <div class="endpoint">
        <h2><span class="method post">POST</span> /api/places</h2>
        <p><strong>Create a new place</strong></p>
        
        <h3>Request Body (JSON):</h3>
        <pre><code>{
    "name": "Example Cafe",
    "description": "A cozy place for coffee and pastries",
    "category": "cafe",
    "address": "789 Sample Avenue",
    "city": "Example City",
    "rating": 4.2
}</code></pre>

        <div class="response">
            <h3>Response Example (201 Created):</h3>
            <pre><code>{
    "status": "success",
    "message": "Place created successfully",
    "data": {
        "id": 150,
        "name": "Example Cafe",
        "description": "A cozy place for coffee and pastries",
        "category": "cafe",
        "address": "789 Sample Avenue",
        "city": "Example City",
        "rating": 4.2,
        "created_at": "2024-01-16 09:15:00",
        "updated_at": "2024-01-16 09:15:00"
    }
}</code></pre>
        </div>

        <div class="response">
            <h3>Error Response Example (422 Validation Error):</h3>
            <pre><code>{
    "status": "error",
    "message": "Validation failed",
    "errors": [
        "Name is required",
        "Category is required"
    ]
}</code></pre>
        </div>

        <h3>Required Fields:</h3>
        <ul>
            <li><code>name</code> (string)</li>
            <li><code>category</code> (string)</li>
            <li><code>address</code> (string)</li>
            <li><code>city</code> (string)</li>
        </ul>

        <h3>Optional Fields:</h3>
        <ul>
            <li><code>description</code> (string)</li>
            <li><code>rating</code> (number between 0-5)</li>
        </ul>

        <h3>Valid Categories:</h3>
        <code>cafe, restaurant, museum, park, landmark, shop, hotel, theater, bar, bakery, library, gallery, monument, mall, market</code>
    </div>

    <div class="endpoint">
        <h2><span class="method get">GET</span> /api/places/{id}</h2>
        <p><strong>Get a specific place by ID</strong></p>
        
        <h3>Request Example:</h3>
        <pre><code>GET /api/places/101</code></pre>

        <div class="response">
            <h3>Response Example (200 OK):</h3>
            <pre><code>{
    "status": "success",
    "data": {
        "id": 101,
        "name": "Sample Park",
        "description": "Beautiful urban park with walking trails",
        "category": "park",
        "address": "321 Green Street",
        "city": "Sample City",
        "rating": 4.7,
        "created_at": "2024-01-15 10:30:00",
        "updated_at": "2024-01-15 10:30:00"
    }
}</code></pre>
        </div>

        <div class="response">
            <h3>Error Response (404 Not Found):</h3>
            <pre><code>{
    "status": "error",
    "message": "Place not found"
}</code></pre>
        </div>
    </div>

    <div class="endpoint">
        <h2><span class="method put">PUT</span> /api/places/{id}</h2>
        <p><strong>Update an existing place</strong></p>
        
        <h3>Request Body (JSON):</h3>
        <pre><code>{
    "name": "Updated Cafe Name",
    "rating": 4.8
}</code></pre>
        <p><em>Note: You can update any field - only include the fields you want to change</em></p>

        <h3>Request Example:</h3>
        <pre><code>PUT /api/places/101</code></pre>

        <div class="response">
            <h3>Response Example (200 OK):</h3>
            <pre><code>{
    "status": "success",
    "message": "Place updated successfully",
    "data": {
        "id": 101,
        "name": "Updated Cafe Name",
        "description": "Beautiful urban park with walking trails",
        "category": "park",
        "address": "321 Green Street",
        "city": "Sample City",
        "rating": 4.8,
        "created_at": "2024-01-15 10:30:00",
        "updated_at": "2024-01-16 11:45:00"
    }
}</code></pre>
        </div>
    </div>

    <div class="endpoint">
        <h2><span class="method delete">DELETE</span> /api/places/{id}</h2>
        <p><strong>Delete a place</strong></p>
        
        <h3>Request Example:</h3>
        <pre><code>DELETE /api/places/101</code></pre>

        <div class="response">
            <h3>Response Example (200 OK):</h3>
            <pre><code>{
    "status": "success",
    "message": "Place deleted successfully"
}</code></pre>
        </div>
    </div>

    <div class="endpoint">
        <h2>Testing Tools</h2>
        <p>You can test this API using:</p>
        <ul>
            <li><strong>Postman</strong> - API testing tool</li>
            <li><strong>curl</strong> - Command line tool</li>
            <li><strong>JavaScript fetch</strong> - Browser API</li>
        </ul>

        <h3>curl Examples:</h3>
        <pre><code># GET all places
curl -X GET http://localhost/wshop-api/public/index.php/api/places

# POST new place
curl -X POST http://localhost/wshop-api/public/index.php/api/places \
  -H "Content-Type: application/json" \
  -d '{"name":"Test Place","category":"cafe","address":"123 Test St","city":"Test City"}'

# DELETE place
curl -X DELETE http://localhost/wshop-api/public/index.php/api/places/1</code></pre>
    </div>
</body>
</html>